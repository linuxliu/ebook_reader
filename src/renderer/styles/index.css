@tailwind base;
@tailwind components;
@tailwind utilities;

/* Custom base styles */
@layer base {
  html {
    font-family: 'Microsoft YaHei', 'SimSun', Arial, sans-serif;
  }
  
  body {
    @apply antialiased;
  }
}

/* CSS Variables for theme system */
:root {
  /* Default light theme variables */
  --color-bg-primary: #ffffff;
  --color-bg-secondary: #f8fafc;
  --color-bg-tertiary: #f1f5f9;
  --color-bg-elevated: #ffffff;
  --color-text-primary: #1e293b;
  --color-text-secondary: #475569;
  --color-text-tertiary: #64748b;
  --color-text-inverse: #ffffff;
  --color-border-primary: #e2e8f0;
  --color-border-secondary: #cbd5e1;
  --color-border-focus: #0ea5e9;
  --color-interactive-primary: #0ea5e9;
  --color-interactive-primary-hover: #0284c7;
  --color-interactive-secondary: #e2e8f0;
  --color-interactive-secondary-hover: #cbd5e1;
  --color-interactive-danger: #ef4444;
  --color-interactive-danger-hover: #dc2626;
  --color-interactive-success: #10b981;
  --color-interactive-success-hover: #059669;
  --color-reader-bg: #ffffff;
  --color-reader-text: #1e293b;
  --color-reader-selection: #bae6fd;
  --color-reader-selection-text: #0c4a6e;
  --color-reader-highlight: #fef3c7;
}

/* Custom component styles using CSS variables */
@layer components {
  .btn-primary {
    background-color: var(--color-interactive-primary);
    color: var(--color-text-inverse);
    @apply font-medium py-2 px-4 rounded-lg transition-colors duration-200;
  }
  
  .btn-primary:hover {
    background-color: var(--color-interactive-primary-hover);
  }
  
  .btn-secondary {
    background-color: var(--color-interactive-secondary);
    color: var(--color-text-primary);
    @apply font-medium py-2 px-4 rounded-lg transition-colors duration-200;
  }
  
  .btn-secondary:hover {
    background-color: var(--color-interactive-secondary-hover);
  }
  
  .btn-danger {
    background-color: var(--color-interactive-danger);
    color: var(--color-text-inverse);
    @apply font-medium py-2 px-4 rounded-lg transition-colors duration-200;
  }
  
  .btn-danger:hover {
    background-color: var(--color-interactive-danger-hover);
  }
  
  .btn-success {
    background-color: var(--color-interactive-success);
    color: var(--color-text-inverse);
    @apply font-medium py-2 px-4 rounded-lg transition-colors duration-200;
  }
  
  .btn-success:hover {
    background-color: var(--color-interactive-success-hover);
  }
  
  .card {
    background-color: var(--color-bg-elevated);
    border-color: var(--color-border-primary);
    @apply rounded-lg shadow-md border;
  }
  
  .input-field {
    background-color: var(--color-bg-primary);
    border-color: var(--color-border-primary);
    color: var(--color-text-primary);
    @apply w-full px-3 py-2 border rounded-lg placeholder-gray-500 focus:outline-none focus:ring-2 focus:border-transparent;
  }
  
  .input-field:focus {
    border-color: var(--color-border-focus);
    box-shadow: 0 0 0 2px var(--color-border-focus);
  }
  
  .input-field::placeholder {
    color: var(--color-text-tertiary);
  }
}

/* Custom utility styles */
@layer utilities {
  .text-balance {
    text-wrap: balance;
  }
  
  .scrollbar-thin {
    scrollbar-width: thin;
    scrollbar-color: rgb(156 163 175) transparent;
  }
  
  .scrollbar-thin::-webkit-scrollbar {
    width: 6px;
  }
  
  .scrollbar-thin::-webkit-scrollbar-track {
    background: transparent;
  }
  
  .scrollbar-thin::-webkit-scrollbar-thumb {
    background-color: rgb(156 163 175);
    border-radius: 3px;
  }
  
  .scrollbar-thin::-webkit-scrollbar-thumb:hover {
    background-color: rgb(107 114 128);
  }
}
/* Reader-specific styles using CSS variables */
@layer components {
  .reader-container {
    @apply h-screen flex flex-col transition-colors duration-300;
  }
  
  .reader-container.fullscreen {
    background-color: var(--color-reader-bg);
    @apply fixed inset-0 z-50;
  }
  
  .reader-main {
    @apply flex-1 relative overflow-hidden;
  }
  
  .reader-content {
    background-color: var(--color-reader-bg);
    @apply relative h-full transition-colors duration-300;
  }
  
  .reader-text {
    color: var(--color-reader-text);
    @apply max-w-none leading-relaxed transition-colors duration-300;
  }
  
  .reader-text p {
    @apply mb-4 text-justify;
  }
  
  .reader-text h1,
  .reader-text h2,
  .reader-text h3,
  .reader-text h4,
  .reader-text h5,
  .reader-text h6 {
    @apply font-bold mb-4 mt-6;
  }
  
  .reader-toolbar {
    background-color: var(--color-bg-elevated);
    border-color: var(--color-border-primary);
    @apply flex-shrink-0 border-t;
  }
  
  .page-controls {
    @apply pointer-events-auto;
  }
  
  .fullscreen-controls {
    @apply pointer-events-auto;
  }
  
  /* Selection styles using CSS variables */
  .reader-text ::selection {
    background-color: var(--color-reader-selection);
    color: var(--color-reader-selection-text);
  }
  
  /* Highlight styles */
  .reader-text .highlight {
    background-color: var(--color-reader-highlight);
    @apply px-1 rounded;
  }
  
  /* Print styles for better reading experience */
  @media print {
    .reader-toolbar,
    .page-controls,
    .fullscreen-controls {
      @apply hidden;
    }
    
    .reader-container {
      @apply h-auto;
    }
    
    .reader-content {
      @apply overflow-visible;
    }
    
    .reader-text {
      color: #000 !important;
    }
  }
}

/* Animation utilities for reader */
@layer utilities {
  .fade-in {
    animation: fadeIn 0.3s ease-in-out;
  }
  
  .fade-out {
    animation: fadeOut 0.3s ease-in-out;
  }
  
  .slide-up {
    animation: slideUp 0.3s ease-out;
  }
  
  .slide-down {
    animation: slideDown 0.3s ease-out;
  }
}

@keyframes fadeIn {
  from {
    opacity: 0;
  }
  to {
    opacity: 1;
  }
}

@keyframes fadeOut {
  from {
    opacity: 1;
  }
  to {
    opacity: 0;
  }
}

@keyframes slideUp {
  from {
    transform: translateY(20px);
    opacity: 0;
  }
  to {
    transform: translateY(0);
    opacity: 1;
  }
}

@keyframes slideDown {
  from {
    transform: translateY(-20px);
    opacity: 0;
  }
  to {
    transform: translateY(0);
    opacity: 1;
  }
}

/* Responsive layout utilities */
@layer utilities {
  /* Compact layout styles for mobile/tablet */
  .compact-layout {
    @apply text-sm;
  }
  
  .compact-layout .btn-primary,
  .compact-layout .btn-secondary {
    @apply py-1 px-2 text-sm;
  }
  
  .compact-layout .card {
    @apply p-3;
  }
  
  .compact-layout .input-field {
    @apply py-1 px-2 text-sm;
  }
  
  /* Standard layout styles for desktop */
  .standard-layout {
    @apply text-base;
  }
  
  /* Breakpoint-specific styles */
  .breakpoint-sm {
    --layout-padding: 0.5rem;
    --layout-gap: 0.5rem;
  }
  
  .breakpoint-md {
    --layout-padding: 1rem;
    --layout-gap: 0.75rem;
  }
  
  .breakpoint-lg {
    --layout-padding: 1.5rem;
    --layout-gap: 1rem;
  }
  
  .breakpoint-xl {
    --layout-padding: 2rem;
    --layout-gap: 1.5rem;
  }
  
  .breakpoint-2xl {
    --layout-padding: 2.5rem;
    --layout-gap: 2rem;
  }
  
  /* Responsive text sizes */
  .text-responsive-xs {
    @apply text-xs sm:text-sm md:text-base;
  }
  
  .text-responsive-sm {
    @apply text-sm sm:text-base md:text-lg;
  }
  
  .text-responsive-base {
    @apply text-base sm:text-lg md:text-xl;
  }
  
  .text-responsive-lg {
    @apply text-lg sm:text-xl md:text-2xl;
  }
  
  .text-responsive-xl {
    @apply text-xl sm:text-2xl md:text-3xl;
  }
  
  /* Responsive spacing */
  .space-responsive {
    @apply space-y-2 sm:space-y-3 md:space-y-4;
  }
  
  .gap-responsive {
    @apply gap-2 sm:gap-3 md:gap-4;
  }
  
  /* Responsive padding */
  .p-responsive {
    @apply p-2 sm:p-3 md:p-4 lg:p-6;
  }
  
  .px-responsive {
    @apply px-2 sm:px-3 md:px-4 lg:px-6;
  }
  
  .py-responsive {
    @apply py-2 sm:py-3 md:py-4;
  }
}

/* Responsive component overrides */
@layer components {
  /* Responsive buttons */
  @media (max-width: 768px) {
    .btn-primary,
    .btn-secondary,
    .btn-danger,
    .btn-success {
      @apply py-1.5 px-3 text-sm;
    }
  }
  
  /* Responsive cards */
  @media (max-width: 768px) {
    .card {
      @apply p-3;
    }
  }
  
  /* Responsive input fields */
  @media (max-width: 768px) {
    .input-field {
      @apply py-1.5 px-2 text-sm;
    }
  }
  
  /* Responsive reader styles */
  @media (max-width: 768px) {
    .reader-text {
      @apply text-sm leading-relaxed;
    }
    
    .reader-text p {
      @apply mb-3;
    }
    
    .reader-text h1,
    .reader-text h2,
    .reader-text h3,
    .reader-text h4,
    .reader-text h5,
    .reader-text h6 {
      @apply mb-3 mt-4;
    }
  }
  
  /* Responsive toolbar */
  @media (max-width: 768px) {
    .reader-toolbar {
      @apply px-2 py-1;
    }
  }
}

/* Accessibility improvements */
@media (prefers-reduced-motion: reduce) {
  .fade-in,
  .fade-out,
  .slide-up,
  .slide-down {
    animation: none;
  }
  
  .transition-all,
  .transition-colors,
  .transition-transform {
    transition: none;
  }
}

@media (prefers-contrast: high) {
  :root {
    --color-border-primary: #000000;
    --color-border-secondary: #333333;
    --color-text-primary: #000000;
    --color-text-secondary: #333333;
  }
  
  .dark {
    --color-border-primary: #ffffff;
    --color-border-secondary: #cccccc;
    --color-text-primary: #ffffff;
    --color-text-secondary: #cccccc;
  }
}